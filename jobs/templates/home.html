{% extends 'base.html' %}

{% block title %}CareerConnect - Find Your Dream Job{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <h1>Find Your Dream Job Today</h1>
        <p>Thousands of jobs waiting for you. Start your career journey now!</p>
        
        <div class="hero-search">
            <form method="get" action="{% url 'jobs:job_listings' %}" class="search-form">
                <input type="text" name="keyword" placeholder="Job title, keywords..." class="form-input">
                <input type="text" name="location" placeholder="Location" class="form-input">
                <button type="submit" class="btn btn-primary">Search Jobs</button>
            </form>
        </div>
    </div>
</section>

<!-- ‚úÖ NEW: Recommended Jobs Section (Only for logged-in job seekers) -->
{% if user.is_authenticated and user.profile.user_type == 'seeker' and recommended_jobs %}
<section class="py-4" style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);">
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <div>
                <h2 style="margin-bottom: 0.5rem;">
                    <span style="margin-right: 0.5rem;">‚ú®</span>
                    Recommended For You
                </h2>
                <p style="color: var(--gray-color); margin: 0;">Based on your profile and activity</p>
            </div>
            <span class="tag tag-primary" style="font-size: 0.875rem;">AI-Powered</span>
        </div>
        
        <div class="grid grid-3">
            {% for job in recommended_jobs %}
                <div class="card" style="border: 2px solid var(--primary-light); position: relative; overflow: visible;">
                    <!-- AI Badge -->
                    <div style="position: absolute; top: -10px; right: 10px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        ü§ñ AI Match
                    </div>
                    
                    <div class="card-header">
                        <div>
                            <h3 class="card-title">{{ job.title }}</h3>
                            <p class="card-subtitle">{{ job.company_name }}</p>
                        </div>
                        <span class="tag tag-primary">{{ job.get_job_type_display }}</span>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <span class="tag tag-success" style="margin-right: 0.5rem;">{{ job.get_category_display }}</span>
                    </div>
                    
                    <div class="job-meta mb-2">
                        <span class="job-meta-item">üìç {{ job.location }}</span>
                        <span class="job-meta-item">üí∞ {{ job.salary_range }}</span>
                        <span class="job-meta-item">üìÖ {{ job.posted_date|timesince }} ago</span>
                    </div>
                    
                    <a href="{% url 'jobs:job_detail' job.id %}" class="btn btn-primary btn-small" style="width: 100%;">View Details</a>
                </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-3">
            <a href="{% url 'jobs:job_listings' %}" class="btn btn-outline">See More Jobs</a>
        </div>
    </div>
</section>
{% endif %}

<!-- Job Categories -->
<section class="py-4">
    <div class="container">
        <h2 class="text-center mb-3">Browse by Category</h2>
        <div class="grid grid-4">
            {% for code, name in job_categories %}
                <a href="{% url 'jobs:job_listings' %}?category={{ code }}" class="card" style="text-decoration: none; color: inherit;">
                    <h3 class="card-title">{{ name }}</h3>
                    <p class="card-subtitle">Explore opportunities</p>
                </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Recent Jobs -->
<section class="py-4" style="background-color: #f9fafb;">
    <div class="container">
        <h2 class="text-center mb-3">Recent Job Openings</h2>
        <div class="grid grid-3">
            {% for job in recent_jobs %}
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title">{{ job.title }}</h3>
                            <p class="card-subtitle">{{ job.company_name }}</p>
                        </div>
                        <span class="tag tag-primary">{{ job.get_job_type_display }}</span>
                    </div>
                    <div class="job-meta mb-2">
                        <span class="job-meta-item">üìç {{ job.location }}</span>
                        <span class="job-meta-item">üí∞ {{ job.salary_range }}</span>
                    </div>
                    <a href="{% url 'jobs:job_detail' job.id %}" class="btn btn-outline btn-small">View Details</a>
                </div>
            {% empty %}
                <p>No jobs available at the moment.</p>
            {% endfor %}
        </div>
        <div class="text-center mt-3">
            <a href="{% url 'jobs:job_listings' %}" class="btn btn-primary">View All Jobs</a>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-4">
    <div class="container">
        <div class="card" style="background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%); color: white; text-align: center; padding: 3rem;">
            <h2 style="color: white; margin-bottom: 1rem;">Ready to Get Started?</h2>
            <p style="font-size: 1.125rem; margin-bottom: 2rem;">Join thousands of job seekers and employers on CareerConnect</p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                {% if not user.is_authenticated %}
                    <a href="{% url 'jobs:register' %}" class="btn" style="background: white; color: #2563eb;">Register as Job Seeker</a>
                    <a href="{% url 'jobs:register' %}" class="btn btn-outline" style="border-color: white; color: white;">Register as Employer</a>
                {% else %}
                    {% if user.profile.user_type == 'seeker' %}
                        <a href="{% url 'jobs:job_listings' %}" class="btn" style="background: white; color: #2563eb;">Browse Jobs</a>
                    {% else %}
                        <a href="{% url 'jobs:post_job' %}" class="btn" style="background: white; color: #2563eb;">Post a Job</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Features -->
<section class="py-4" style="background-color: #f9fafb;">
    <div class="container">
        <h2 class="text-center mb-3">Why Choose CareerConnect?</h2>
        <div class="grid grid-3">
            <div class="card text-center">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üéØ</div>
                <h3 class="card-title">Easy to Use</h3>
                <p>Simple and intuitive interface to find or post jobs quickly</p>
            </div>
            <div class="card text-center">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üöÄ</div>
                <h3 class="card-title">Quick Applications</h3>
                <p>Apply to multiple jobs with just a few clicks</p>
            </div>
            <div class="card text-center">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üíº</div>
                <h3 class="card-title">Quality Opportunities</h3>
                <p>Connect with top employers and talented candidates</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}